var GAME=GAME||{};$(".start-page input").change(function(a){var b=a.target.files[0],c=new FileReader;console.log(b),c.onload=function(a){$(".preview-img").attr("src",a.target.result)},c.readAsDataURL(b)}),GAME.app=function(){var a,b=window.innerHeight,c=window.innerWidth,d=10,e=function(){var d=document.getElementById("game-canvas");d.width=c,d.height=b,a=d.getContext("2d")},f=["https://cdn1.iconfinder.com/data/icons/winter_png/32/christmas_5.png","https://cdn3.iconfinder.com/data/icons/wpzoom-developer-icon-set/500/114-32.png","https://cdn1.iconfinder.com/data/icons/ie_Smashing_Christmas/32/christmas_35.png","https://cdn1.iconfinder.com/data/icons/Easter_lin/png/32x32/Ovo.png","https://cdn1.iconfinder.com/data/icons/desktop-halloween/32/Candy.png","https://cdn1.iconfinder.com/data/icons/iconshock_vista_CharlieandtheChocolateFactory/png/32/CharlieandtheChocolateFactory1.png","https://cdn1.iconfinder.com/data/icons/Birthday_iconfinder/32/lolly-strawberry.png","https://cdn1.iconfinder.com/data/icons/icon-set-32-px/32/Candy_Apple.png","https://cdn1.iconfinder.com/data/icons/CrystalClear/32x32/apps/icons.png","https://cdn1.iconfinder.com/data/icons/fatcow/32/candy_cane.png"],g=function(){this.item=new Image,this.item.src=f[o(f.length)],this.x=o(c),this.y=o(5),this.speed=3+o(5),this.caught=!1};g.prototype.dropItem=function(){};var h=function(){this.score=0,this.timer=30},i=new h,j=function(){i.timer--,0==i.timer&&alert("game over!")};setInterval(j,1e3);var k,l=function(){this.objects=[],this.imgBg=new Image,this.imgBg.src="http://wallpoper.com/images/00/42/22/95/shapes-gradient_00422295.jpg";var e;this.drawBackground=function(){a.drawImage(imgBg,0,0)},this.drawGameInfo=function(){a.font="20px Georgia",a.fillText("Score",10,20),a.fillText(i.score,25,40),a.fillText("Timer",c-60,20),a.fillText(i.timer,c-45,40)},this.draw=function(){this.drawBackground(),this.drawGameInfo();for(var e=0;d>e;e++)a.drawImage(objects[e].item,objects[e].x,objects[e].y),objects[e].y+=objects[e].speed,(objects[e].y>b||objects[e].caught)&&(objects[e].caught?i.score+=10:i.score-=5,objects[e].y=-25,objects[e].x=o(c)-25,objects[e].caught=!1),objects[e].y>b-120&&objects[e].x>k.x&&objects[e].x<k.x+200&&(objects[e].caught=!0)},this.load=function(){for(var a=0;d>a;a++)e=new g,this.objects.push(e);setInterval(draw,36)},this.load()},m=function(){this.item=new Image,this.item.src="https://cdn1.iconfinder.com/data/icons/adidas/128/Shoebox_512x512.png",this.item.src2="https://cdn1.iconfinder.com/data/icons/windows-8-metro-style/128/tool_box.png",this.x=c/2,this.y=b-100,this.gamma=0},n=function(){k=new m,window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(a){k.gamma=a.gamma},!1),this.checkCatched=function(){},this.draw=function(){this.checkCatched(),k.x>=0&&k.x<=c-120&&(k.x+=k.gamma,k.gamma=0,k.x<0?k.x=0:k.x>c-120&&(k.x=c-120)),a.drawImage(k.item,k.x,k.y)},setInterval(this.draw,36)},o=function(a){return min=0,Math.floor(Math.random()*(a-min+1))+min};return{welcome:function(){},getImagesFromUser:function(){},startGame:function(){e(),l(),n()}}}(),GAME.app.startGame();